{"remainingRequest":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fenglin/Desktop/study/backstage/src/pages/index/Shops.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fenglin/Desktop/study/backstage/src/pages/index/Shops.vue","mtime":1591945820571},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/thread-loader/dist/cjs.js","mtime":1590894340251},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/babel-loader/lib/index.js","mtime":1590894340261},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js","mtime":1590894353459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgQVBJX1NIT1BfSU5GTywKICBBUElfU0hPUF9FRElUCiAgCn0gZnJvbSAiQC9hcGkvYXBpcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5bqX6ZO65Zu+54mH5riy5p+TCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOW6l+mTuuWktOWDjwogICAgICB1cmw6ICcnLAogICAgICBmaWxlOiAnJywKICAgICAgLy8gCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgcGljVXJsOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3VwbG9hZC9zaG9wLycsCiAgICAgIHZhbHVlMTogJycsCiAgICAgIGRlbGl2ZXJ5OiBmYWxzZSwKICAgICAgcmVzb3VyY2U6ICIiLAogICAgICBkZXNjOiAiIiwKICAgICAgaW1hZ2VVcmw6ICIiLAogICAgICBsYWJlbFBvc2l0aW9uOiAicmlnaHQiLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgcmVnaW9uOiAiIiwKICAgICAgICBwcmljZTogIiIsCiAgICAgICAgZ3JhZGU6ICIiLAogICAgICAgIHNhbGVzOiAiIiwKICAgICAgICAvLyDlupfpk7rlpLTlg4/nmoTmuLLmn5PmlbDnu4QKICAgICAgICBwaWNzOiBbXSwKICAgICAgICBzdXBwb3J0czogW10KCiAgICAgICAgLy8gZGF0ZTE6ICIiLAogICAgICAgIC8vIGRhdGUyOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICJpbWFnZS9qcGVnIjsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcg5qC85byPISIpOwogICAgICB9CiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEiKTsKICAgICAgfQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOwogICAgfSwKICAgIC8v5bqX6ZO65Zu+54mH5LiK5Lyg5oiQ5Yqf55qE5Ye95pWwCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7CiAgICAgIHRoaXMucGljcy5wdXNoKHJlcy5pbWdVcmwpCiAgICAgIGNvbnNvbGUubG9nKCfmiJDlip/nmoTlm57osIPlh73mlbAnLCB0aGlzLnBpY3MpOwogICAgICBjb25zb2xlLmxvZygn6Lev5b6EJywgdGhpcy5pbWFnZVVybCk7CiAgICB9LAogICAgLy8g5paH5Lu25Yig6Zmk5pe255qE6ZKp5a2QCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5waWNzID0gZmlsZUxpc3QKICAgICAgY29uc29sZS5sb2coJ+WIoOmZpOaXtuWAmeeahOmSqeWtkDEnLCBmaWxlKTsKICAgICAgY29uc29sZS5sb2coJ+WIoOmZpOaXtuWAmeeahOmSqeWtkCcsIGZpbGVMaXN0KTsKICAgIH0sCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g54K55Ye75L+d5a2Y55qE5pe25YCZ5Y+R6YCB5L+u5pS555qE6K+35rGCCiAgICBzYXZlX2J0bigpIHsKICAgICAgbGV0IG5ld0RhdGE9ey4uLnRoaXMuZm9ybX07CiAgICAgIG5ld0RhdGEuc3VwcG9ydHM9SlNPTi5zdHJpbmdpZnkobmV3RGF0YS5zdXBwb3J0cyksCiAgICAgIG5ld0RhdGEuZGF0ZT1KU09OLnN0cmluZ2lmeShuZXdEYXRhLmRhdGUpLAogICAgICBuZXdEYXRhLnBpY3M9SlNPTi5zdHJpbmdpZnkodGhpcy5waWNzKQogICAgICBBUElfU0hPUF9FRElUKG5ld0RhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gJzAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi57yW6L6R5oiQ5YqffiIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KQogICAgfQoKICB9LAoKICBjcmVhdGVkKCkgewogICAgQVBJX1NIT1BfSU5GTygpLnRoZW4ocmVzID0+IHsKICAgICAgLy8gPHNwYW4+CiAgICAgIC8vICAgICAgICAgPGVsLWltYWdlIHN0eWxlPSJ3aWR0aDogMTAwcHg7IGhlaWdodDogMTAwcHgiCiAgICAgIC8vICAgICAgICAgICA6c3JjPSInJytwcm9wcy5yb3cuaW1nVXJsIj48L2VsLWltYWdlPgogICAgICAvLyAgICAgICA8L3NwYW4+CiAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhLmRhdGEKICAgICAgdGhpcy51cmwgPSAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3VwbG9hZC9zaG9wLycgKyB0aGlzLmZvcm0uYXZhdGFyCiAgICAgIHRoaXMucGljcyA9IHJlcy5kYXRhLmRhdGEucGljcwogICAgICAvLyBjb25zb2xlLmxvZygn5aKe5Yqg5YmNJywgdGhpcy5maWxlTGlzdCk7CiAgICAgIC8vIOmBjeWOhuW6l+mTuuWbvueJhwogICAgICB0aGlzLmZpbGVMaXN0ID0gdGhpcy5waWNzLm1hcChpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdXJsOiB0aGlzLnBpY1VybCArIGkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC8vIHRoaXMucGljcy5mb3JFYWNoKGkgPT4gewogICAgICAvLyAgIC8vIHRoaXMubGlzdC5wdXNoKHRoaXMucGljVXJsK2kpCiAgICAgIC8vICAgLy8gdGhpcy5waWNVcmwraQogICAgICAvLyAgIC8vIOWvueixoQoKICAgICAgLy8gICBsZXQgZGl2aWRlID0gewogICAgICAvLyAgICAgdXJsOiB0aGlzLnBpY1VybCArIGkKICAgICAgLy8gICB9CiAgICAgIC8vICAgLy8g6L+95Yqg5Yiw5pWw57uECiAgICAgIC8vICAgdGhpcy5maWxlTGlzdC5wdXNoKGRpdmlkZSkKICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLnBpY1VybCtpKTsKICAgICAgLy8gfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdob3UnLCB0aGlzLmZpbGVMaXN0KTsKCiAgICB9KQogIH0sCn07Cg=="},{"version":3,"sources":["Shops.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Shops.vue","sourceRoot":"src/pages/index","sourcesContent":["<template>\n  <el-card class=\"box-card\">\n   \n      <div slot=\"header\" class=\"clearfix\">\n        <span>店铺管理</span>\n        <el-button style=\"float: right;\" type=\"primary\" @click='save_btn'>保存</el-button>\n      </div>\n      <div style=\"width: 600px;\">\n      <div>\n        <!-- //         : \"1590473180839.webp\"\n  // : (2) [\"1970-01-01 08:00:00\", \"1970-01-01 22:30:00\"]\n  \n  // : (2) [\"单人精彩套餐\", \"VC无限橙果汁全场8折\"] -->\n        <div style=\"margin: 20px;\"></div>\n        <el-form :label-position=\"labelPosition\" label-width=\"80px\">\n          <el-form-item label=\"店铺名称\">\n            <el-input v-model=\"form.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"店铺公告\">\n            <el-input type=\"textarea\" v-model=\"form.bulletin\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"店铺头像\">\n            <el-upload\n  class=\"avatar-uploader\"\n  action=\"http://127.0.0.1:5000/shop/upload\"\n  :show-file-list=\"false\"\n  :on-success=\"handleAvatarSuccess\"\n  :before-upload=\"beforeAvatarUpload\">\n  <img v-if=\"imageUrl\" :src=\"url\" class=\"avatar\">\n  <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n</el-upload>\n            <!-- <div class=\"demo-fit\">\n              <div class=\"block\">\n                <el-avatar shape=\"square\" :size=\"100\" :src=\"url\"></el-avatar>\n              </div>\n            </div> -->\n          </el-form-item>\n          <el-form-item label=\"店铺图片\">\n            <el-upload action=\"http://127.0.0.1:5000/shop/upload\" \n            list-type=\"picture-card\"\n             :file-list='fileList'\n              :on-success=\"handleAvatarSuccess\" :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n          <el-form-item label=\"配送费\">\n            <el-input v-model=\"form.deliveryPrice\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"起送价格\">\n            <el-input v-model=\"form.minPrice\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"送达时间\">\n            <el-input v-model=\"form.deliveryTime\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"配送描述\">\n            <el-input v-model=\"form.description\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"店铺评分\">\n            <el-input v-model=\"form.score\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"销量\">\n            <el-input v-model=\"form.sellCount\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"活动\">\n            <el-checkbox-group v-model=\"form.supports\">\n              <el-checkbox label=\"在线支付满28减5\"></el-checkbox>\n              <el-checkbox label=\"VC无限橙果汁全场8折\"></el-checkbox>\n              <el-checkbox label=\"单人精彩套餐\"></el-checkbox>\n              <el-checkbox label=\"特价饮品8折抢购\"></el-checkbox>\n              <el-checkbox label=\"单人特色套餐\"></el-checkbox>\n            </el-checkbox-group>\n          </el-form-item>\n          <el-form-item label=\"营业时间\">\n            <el-time-picker format='hh 时 mm 分 ss 秒' value-format='yyyy-MM-dd hh:mm:ss' is-range v-model=\"form.date\"\n              range-separator=\"至\" start-placeholder=\"开始时间\" end-placeholder=\"结束时间\" placeholder=\"选择时间范围\">\n            </el-time-picker>\n          </el-form-item>\n        </el-form>\n      </div>\n\n    </div>\n   \n  </el-card>\n</template>\n\n<script>\n  import {\n    API_SHOP_INFO,\n    API_SHOP_EDIT\n    \n  } from \"@/api/apis\";\n  export default {\n    data() {\n      return {\n        // 店铺图片渲染\n        dialogImageUrl: '',\n        dialogVisible: false,\n        // 店铺头像\n        url: '',\n        file: '',\n        // \n        fileList: [],\n        picUrl: 'http://127.0.0.1:5000/upload/shop/',\n        value1: '',\n        delivery: false,\n        resource: \"\",\n        desc: \"\",\n        imageUrl: \"\",\n        labelPosition: \"right\",\n        form: {\n          name: \"\",\n          region: \"\",\n          price: \"\",\n          grade: \"\",\n          sales: \"\",\n          // 店铺头像的渲染数组\n          pics: [],\n          supports: []\n\n          // date1: \"\",\n          // date2: \"\"\n        }\n      };\n    },\n    methods: {\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === \"image/jpeg\";\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n        }\n        if (!isLt2M) {\n          this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n        }\n        return isJPG && isLt2M;\n      },\n      //店铺图片上传成功的函数\n      handleAvatarSuccess(res, file) {\n        this.imageUrl = URL.createObjectURL(file.raw);\n        this.pics.push(res.imgUrl)\n        console.log('成功的回调函数', this.pics);\n        console.log('路径', this.imageUrl);\n      },\n      // 文件删除时的钩子\n      handleRemove(file, fileList) {\n        this.pics = fileList\n        console.log('删除时候的钩子1', file);\n        console.log('删除时候的钩子', fileList);\n      },\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      // 点击保存的时候发送修改的请求\n      save_btn() {\n        let newData={...this.form};\n        newData.supports=JSON.stringify(newData.supports),\n        newData.date=JSON.stringify(newData.date),\n        newData.pics=JSON.stringify(this.pics)\n        API_SHOP_EDIT(newData).then(res => {\n          console.log(res);\n          console.log(res);\n          if (res.data.code == '0') {\n            this.$message({\n              showClose: true,\n              message: \"编辑成功~\",\n              type: \"success\"\n            });\n          }\n        })\n      }\n\n    },\n\n    created() {\n      API_SHOP_INFO().then(res => {\n        // <span>\n        //         <el-image style=\"width: 100px; height: 100px\"\n        //           :src=\"''+props.row.imgUrl\"></el-image>\n        //       </span>\n        this.form = res.data.data\n        this.url = 'http://127.0.0.1:5000/upload/shop/' + this.form.avatar\n        this.pics = res.data.data.pics\n        // console.log('增加前', this.fileList);\n        // 遍历店铺图片\n        this.fileList = this.pics.map(i => {\n          return {\n            url: this.picUrl + i\n          }\n        })\n        // this.pics.forEach(i => {\n        //   // this.list.push(this.picUrl+i)\n        //   // this.picUrl+i\n        //   // 对象\n\n        //   let divide = {\n        //     url: this.picUrl + i\n        //   }\n        //   // 追加到数组\n        //   this.fileList.push(divide)\n        //   // console.log(this.picUrl+i);\n        // });\n        // console.log('hou', this.fileList);\n\n      })\n    },\n  };\n</script>\n\n<style scoped>\n  .el-input__inner {\n    width: 400px !important;\n\n  }\n \n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .avatar-uploader .el-upload:hover {\n    border-color: #409eff;\n  }\n\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n\n  .el-button--primary {\n    padding-bottom: 8px;\n  }\n</style>"]}]}