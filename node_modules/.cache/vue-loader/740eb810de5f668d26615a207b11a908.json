{"remainingRequest":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fenglin/Desktop/study/backstage/src/pages/index/Shops.vue?vue&type=style&index=0&id=fc4dea2a&scoped=true&lang=css&","dependencies":[{"path":"/Users/fenglin/Desktop/study/backstage/src/pages/index/Shops.vue","mtime":1591945820571},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/css-loader/dist/cjs.js","mtime":1590894352757},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1590894353459},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/postcss-loader/src/index.js","mtime":1590894353111},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js","mtime":1590894353459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtaW5wdXRfX2lubmVyIHsKICB3aWR0aDogNDAwcHggIWltcG9ydGFudDsKCn0KCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICM0MDllZmY7Cn0KCi5hdmF0YXItdXBsb2FkZXItaWNvbiB7CiAgZm9udC1zaXplOiAyOHB4OwogIGNvbG9yOiAjOGM5MzlkOwogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGxpbmUtaGVpZ2h0OiAxNzhweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5hdmF0YXIgewogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGRpc3BsYXk6IGJsb2NrOwp9CgouZWwtYnV0dG9uLS1wcmltYXJ5IHsKICBwYWRkaW5nLWJvdHRvbTogOHB4Owp9Cg=="},{"version":3,"sources":["Shops.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Shops.vue","sourceRoot":"src/pages/index","sourcesContent":["<template>\n  <el-card class=\"box-card\">\n   \n      <div slot=\"header\" class=\"clearfix\">\n        <span>店铺管理</span>\n        <el-button style=\"float: right;\" type=\"primary\" @click='save_btn'>保存</el-button>\n      </div>\n      <div style=\"width: 600px;\">\n      <div>\n        <!-- //         : \"1590473180839.webp\"\n  // : (2) [\"1970-01-01 08:00:00\", \"1970-01-01 22:30:00\"]\n  \n  // : (2) [\"单人精彩套餐\", \"VC无限橙果汁全场8折\"] -->\n        <div style=\"margin: 20px;\"></div>\n        <el-form :label-position=\"labelPosition\" label-width=\"80px\">\n          <el-form-item label=\"店铺名称\">\n            <el-input v-model=\"form.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"店铺公告\">\n            <el-input type=\"textarea\" v-model=\"form.bulletin\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"店铺头像\">\n            <el-upload\n  class=\"avatar-uploader\"\n  action=\"http://127.0.0.1:5000/shop/upload\"\n  :show-file-list=\"false\"\n  :on-success=\"handleAvatarSuccess\"\n  :before-upload=\"beforeAvatarUpload\">\n  <img v-if=\"imageUrl\" :src=\"url\" class=\"avatar\">\n  <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n</el-upload>\n            <!-- <div class=\"demo-fit\">\n              <div class=\"block\">\n                <el-avatar shape=\"square\" :size=\"100\" :src=\"url\"></el-avatar>\n              </div>\n            </div> -->\n          </el-form-item>\n          <el-form-item label=\"店铺图片\">\n            <el-upload action=\"http://127.0.0.1:5000/shop/upload\" \n            list-type=\"picture-card\"\n             :file-list='fileList'\n              :on-success=\"handleAvatarSuccess\" :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n          <el-form-item label=\"配送费\">\n            <el-input v-model=\"form.deliveryPrice\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"起送价格\">\n            <el-input v-model=\"form.minPrice\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"送达时间\">\n            <el-input v-model=\"form.deliveryTime\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"配送描述\">\n            <el-input v-model=\"form.description\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"店铺评分\">\n            <el-input v-model=\"form.score\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"销量\">\n            <el-input v-model=\"form.sellCount\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"活动\">\n            <el-checkbox-group v-model=\"form.supports\">\n              <el-checkbox label=\"在线支付满28减5\"></el-checkbox>\n              <el-checkbox label=\"VC无限橙果汁全场8折\"></el-checkbox>\n              <el-checkbox label=\"单人精彩套餐\"></el-checkbox>\n              <el-checkbox label=\"特价饮品8折抢购\"></el-checkbox>\n              <el-checkbox label=\"单人特色套餐\"></el-checkbox>\n            </el-checkbox-group>\n          </el-form-item>\n          <el-form-item label=\"营业时间\">\n            <el-time-picker format='hh 时 mm 分 ss 秒' value-format='yyyy-MM-dd hh:mm:ss' is-range v-model=\"form.date\"\n              range-separator=\"至\" start-placeholder=\"开始时间\" end-placeholder=\"结束时间\" placeholder=\"选择时间范围\">\n            </el-time-picker>\n          </el-form-item>\n        </el-form>\n      </div>\n\n    </div>\n   \n  </el-card>\n</template>\n\n<script>\n  import {\n    API_SHOP_INFO,\n    API_SHOP_EDIT\n    \n  } from \"@/api/apis\";\n  export default {\n    data() {\n      return {\n        // 店铺图片渲染\n        dialogImageUrl: '',\n        dialogVisible: false,\n        // 店铺头像\n        url: '',\n        file: '',\n        // \n        fileList: [],\n        picUrl: 'http://127.0.0.1:5000/upload/shop/',\n        value1: '',\n        delivery: false,\n        resource: \"\",\n        desc: \"\",\n        imageUrl: \"\",\n        labelPosition: \"right\",\n        form: {\n          name: \"\",\n          region: \"\",\n          price: \"\",\n          grade: \"\",\n          sales: \"\",\n          // 店铺头像的渲染数组\n          pics: [],\n          supports: []\n\n          // date1: \"\",\n          // date2: \"\"\n        }\n      };\n    },\n    methods: {\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === \"image/jpeg\";\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n        }\n        if (!isLt2M) {\n          this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n        }\n        return isJPG && isLt2M;\n      },\n      //店铺图片上传成功的函数\n      handleAvatarSuccess(res, file) {\n        this.imageUrl = URL.createObjectURL(file.raw);\n        this.pics.push(res.imgUrl)\n        console.log('成功的回调函数', this.pics);\n        console.log('路径', this.imageUrl);\n      },\n      // 文件删除时的钩子\n      handleRemove(file, fileList) {\n        this.pics = fileList\n        console.log('删除时候的钩子1', file);\n        console.log('删除时候的钩子', fileList);\n      },\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      // 点击保存的时候发送修改的请求\n      save_btn() {\n        let newData={...this.form};\n        newData.supports=JSON.stringify(newData.supports),\n        newData.date=JSON.stringify(newData.date),\n        newData.pics=JSON.stringify(this.pics)\n        API_SHOP_EDIT(newData).then(res => {\n          console.log(res);\n          console.log(res);\n          if (res.data.code == '0') {\n            this.$message({\n              showClose: true,\n              message: \"编辑成功~\",\n              type: \"success\"\n            });\n          }\n        })\n      }\n\n    },\n\n    created() {\n      API_SHOP_INFO().then(res => {\n        // <span>\n        //         <el-image style=\"width: 100px; height: 100px\"\n        //           :src=\"''+props.row.imgUrl\"></el-image>\n        //       </span>\n        this.form = res.data.data\n        this.url = 'http://127.0.0.1:5000/upload/shop/' + this.form.avatar\n        this.pics = res.data.data.pics\n        // console.log('增加前', this.fileList);\n        // 遍历店铺图片\n        this.fileList = this.pics.map(i => {\n          return {\n            url: this.picUrl + i\n          }\n        })\n        // this.pics.forEach(i => {\n        //   // this.list.push(this.picUrl+i)\n        //   // this.picUrl+i\n        //   // 对象\n\n        //   let divide = {\n        //     url: this.picUrl + i\n        //   }\n        //   // 追加到数组\n        //   this.fileList.push(divide)\n        //   // console.log(this.picUrl+i);\n        // });\n        // console.log('hou', this.fileList);\n\n      })\n    },\n  };\n</script>\n\n<style scoped>\n  .el-input__inner {\n    width: 400px !important;\n\n  }\n \n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .avatar-uploader .el-upload:hover {\n    border-color: #409eff;\n  }\n\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n\n  .el-button--primary {\n    padding-bottom: 8px;\n  }\n</style>"]}]}