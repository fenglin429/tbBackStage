{"remainingRequest":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fenglin/Desktop/study/backstage/src/pages/Login.vue?vue&type=style&index=0&id=15717af5&lang=less&scoped=true&","dependencies":[{"path":"/Users/fenglin/Desktop/study/backstage/src/pages/Login.vue","mtime":1591872079751},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/css-loader/dist/cjs.js","mtime":1590894352757},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1590894353459},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/postcss-loader/src/index.js","mtime":1590894353111},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/less-loader/dist/cjs.js","mtime":1591183686071},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js","mtime":1590894353459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBiYXNlOiAjMmQzYTRiOwoKLmxvZ2luLWRpdiB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHVybCguLi9hc3NldHMvaW1ncy90aW0uanBlZyk7CiAgLyogYmFja2dyb3VuZC1jb2xvcjogQGJhc2U7ICovCiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAuYm94LWNhcmQgewogICAgd2lkdGg6IDQwMHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwoKICAgIGg0ewogICAgICAgIGNvbG9yOiBAYmFzZTsKICAgICAgICBtYXJnaW46IDE2cHggMDsKICAgIH0KCiAgICAucHdkLWlucHV0IHsKICAgICAgbWFyZ2luLXRvcDogMTZweDsKICAgIH0KICAgIC5idG4gewogICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICB3aWR0aDogMTAwJTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"login-div\">\n    <el-card class=\"box-card\">\n      <h4>天霸餐饮管理系统</h4>\n      <el-input v-model=\"input_user\" placeholder=\"请输入管理员账号\"></el-input>\n      <el-input class=\"pwd-input\" v-model=\"input_pwd\" placeholder=\"请输入密码\"></el-input>\n      <el-button @click=\"clickLogin\" type=\"primary\" class=\"btn\">登录</el-button>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import {\n    API_CHECKLOGIN\n  } from \"@/api/apis\";\n  export default {\n    components: {\n      // index\n    },\n    data() {\n      return {\n        input_user: \"\",\n        input_pwd: \"\",\n        flag: true\n      };\n    },\n    methods: {\n      clickLogin() {\n        // console.log(1)\n        // 点击登录按钮,如果标记为 false 的话不继续执行\n        if (this.flag == false) return;\n        // 发送请求,将标记变为 false\n        this.flag = false;\n        API_CHECKLOGIN(this.input_user, this.input_pwd).then((res) => {\n          // console.log(res.data.code);\n          // 登录成功\n          if (res.data.code == 0) {\n            this.$message({\n              showClose: true,\n              message: \"恭喜您,登录成功~\",\n              type: \"success\"\n            });\n            // 跳转到首页\n            this.$router.push(\"/index/home\");\n            //把 id  token  用户名存储到本地\n            // console.log(res.data.id)\n            // window.localStorage.setItem('user_id',res.data.id)\n            localStorage.user_id = res.data.id;\n            localStorage.user_name = this.input_user;\n            localStorage.token = res.data.token;\n            localStorage.role = res.data.role;\n            // 错误的话\n          } else {\n            this.$message({\n              showClose: true,\n              message: \" 用户名或者密码错误~\",\n              type: \"warning\"\n            });\n          }\n        });\n        // 3 秒内只能发送一次请求,3 秒之后将标记置为 true\n        setTimeout(() => {\n          this.flag = true;\n        }, 3000);\n      }\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  @base: #2d3a4b;\n  \n  .login-div {\n    width: 100%;\n    height: 100%;\n    background: url(../assets/imgs/tim.jpeg);\n    /* background-color: @base; */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  \n    .box-card {\n      width: 400px;\n      text-align: center;\n  \n      h4{\n          color: @base;\n          margin: 16px 0;\n      }\n  \n      .pwd-input {\n        margin-top: 16px;\n      }\n      .btn {\n        margin-top: 20px;\n        width: 100%;\n      }\n    }\n  }\n  </style>"]}]}