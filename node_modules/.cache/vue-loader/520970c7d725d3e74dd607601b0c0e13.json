{"remainingRequest":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fenglin/Desktop/study/backstage/src/pages/index/account/AccountList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fenglin/Desktop/study/backstage/src/pages/index/account/AccountList.vue","mtime":1591782527024},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/babel-loader/lib/index.js","mtime":1590894340261},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js","mtime":1590894353459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOa3u+WKoOWIl+ihqCAvLyDliKDpmaQvLyDnvJbovpEgLy8g5om56YeP5Yig6ZmkCmltcG9ydCB7CiAgQVBJX0xJU1QsCiAgQVBJX0RFbCwKICBBUElfRURJVCwKICBBUElfQkFUQ0hERUwKICAKfSBmcm9tICJAL2FwaS9hcGlzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAvLyDmlbDmja4KICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWNjb3VudDogIiIsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLCAvL+m7mOiupOaYvuekuuesrOS4gOmhtQogICAgICBwYWdlU2l6ZTogNSwgLy/pu5jorqTmr4/pobXmmL7npLo15p2hCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGlkOiAwLAogICAgICAvLyDnvJbovpHmoYbnmoTmmL7npLrlkozpmpDol48KICAgICAgZmxhZzogZmFsc2UsCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5om56YeP5Yig6ZmkaWQg5pWw57uECiAgICAgIGlkQXJyOiBbXSwKICAgICAgZm9ybTogewogICAgICAgIGFjY291bnQ6ICIiLAogICAgICAgIHVzZXJHcm91cDogIiIKICAgICAgfSwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIKICAgIH07CiAgfSwKICAvLyDmlrnms5UKICBtZXRob2RzOiB7CiAgICAvLyDliLfmlrDnlKjmiLfliJfooajlh73mlbAKICAgIHJlZnJlc2goKSB7CiAgICAgIEFQSV9MSVNUKHRoaXMuY3VycmVudFBhZ2UsIHRoaXMucGFnZVNpemUpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIH0pOwoKICAgIH0sCiAgICB0b2dnbGVTZWxlY3Rpb24ocm93cykgewogICAgICBpZiAocm93cykgewogICAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5jbGVhclNlbGVjdGlvbigpOwogICAgICB9CiAgICB9LAogICAgLy8g5YiG6aG1OuWKqOaAgeavj+mhteaYvuekuuadoeaVsAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coYCR7dmFsfWApOwogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOyAvL+WKqOaAgeaUueWPmAogICAgICAvLyDmlLnlj5jkuYvlkI7lupTor6XlgZznlZnlnKjlvZPliY3nmoTpobXpnaIKICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuY3VycmVudFBhZ2UpCiAgICB9LAogICAgLy8g5YiG6aG1OuWKqOaAgeW9k+WJjemhtSznrKzlh6DpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGAke3ZhbH1gKTsKICAgICAgLy/liqjmgIHmlLnlj5g65q+P6aG15aSa5bCR5p2hCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7CiAgICAgIHRoaXMucmVmcmVzaCh0aGlzLmN1cnJlbnRQYWdlKQoKICAgIH0sCiAgICAvLyDpgInkuK0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgICAgLy8g5pWw57uE5a+56LGhCiAgICAgIC8vIGNvbnNvbGUubG9nKCB0aGlzLm11bHRpcGxlU2VsZWN0aW9uICkKICAgICAgZm9yIChsZXQgb2JqIGluIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm11bHRpcGxlU2VsZWN0aW9uW29ial0uaWQpCiAgICAgICAgdGhpcy5pZEFyci5wdXNoKHRoaXMubXVsdGlwbGVTZWxlY3Rpb25bb2JqXS5pZCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8gIOWPlua2iOmAieaLqQogICAgY2FuY2VsX2J0bigpIHsKICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICB9LAogICAgLy8g57yW6L6R5qih5oCB5qGGCiAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsKICAgICAgLy8gY29uc29sZS5sb2cocm93KTsKICAgICAgLy8g5pi+56S65qih5oCB5qGGCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAvLyDlpI3liLbnu5kgZm9ybQogICAgICB0aGlzLmZvcm0gPSByb3c7CiAgICB9LAogICAgLy8g57yW6L6RCiAgICAvLyBkaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICBlZGl0X2J0bigpIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgQVBJX0VESVQodGhpcy5mb3JtLmlkLCB0aGlzLmZvcm0uYWNjb3VudCwgdGhpcy5mb3JtLnVzZXJHcm91cCkudGhlbihyZXMgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIue8lui+keaIkOWKn34iLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgICAgLy8g6ZqQ6JeP5qih5oCB5qGGCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeaVsOaNriwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBBUElfREVsKHJvdy5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgewogICAgICAgICAgICAvLyDph43mlrDmuLLmn5MKICAgICAgICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuY3VycmVudFBhZ2UpCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqffiIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KQogICAgICAvLyBjb25zb2xlLmxvZyhyb3cuaWQpOwogICAgfSwKICAgIC8vIOaJuemHj+WIoOmZpAogICAgYmF0Y2hfYnRoKCkgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XmlbDmja4sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5pZEFycikpCiAgICAgICAgQVBJX0JBVENIREVMKEpTT04uc3RyaW5naWZ5KHRoaXMuaWRBcnIpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgewogICAgICAgICAgICB0aGlzLnJlZnJlc2godGhpcy5jdXJyZW50UGFnZSkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip9+IiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pCgogICAgfQogIH0sCiAgLy8g6aG16Z2i5Yqg6L295a6M5q+V55qE5pe25YCZ5Yqg6L295YiX6KGoCiAgY3JlYXRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCfor7fmsYLnmoTlj4LmlbAnLHRoaXMuY3VycmVudFBhZ2UpOwogICAgdGhpcy5yZWZyZXNoKCkKICB9Cn07Cg=="},{"version":3,"sources":["AccountList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountList.vue","sourceRoot":"src/pages/index/account","sourcesContent":["<template>\n  <el-card class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>账号列表</span>\n    </div>\n    <el-table ref=\"multipleTable\" tooltip-effect=\"dark\" style=\"width: 100%;\" :data=\"tableData\"\n      @selection-change=\"handleSelectionChange\">\n      <!-- 设置列名  width:宽 type=\"selection\" :多选框 -->\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n      <el-table-column prop=\"account\" label=\"账号\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"userGroup\" label=\"用户组\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"ctime\" label=\"创建时间\"></el-table-column>\n      <!-- 按钮  tableData -->\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n          <el-dialog title=\"编辑用户信息\" :visible.sync=\"dialogFormVisible\">\n            <el-form :model=\"form\">\n              <el-form-item label=\"账号\" :label-width=\"formLabelWidth\">\n                <el-input v-model=\"form.account\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"用户组\" :label-width=\"formLabelWidth\">\n                <el-select v-model=\"form.userGroup\" placeholder=\"请选择用户组\">\n                  <el-option label=\"超级管理员\" value=\"超级管理员\"></el-option>\n                  <el-option label=\"普通管理员\" value=\"普通管理员\"></el-option>\n                </el-select>\n              </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" :plain=\"true\" @click=\"edit_btn\">确 定</el-button>\n            </div>\n          </el-dialog>\n          <el-button size=\"mini\" :plain=\"true\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分页器:当前页码,每页条数-->\n    <!--page-sizes:每页条数的数组,page-sizes:可以选择的每页显示的条数,page-size:每页显示的条数,pager:当前页-->\n    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :page-sizes=\"[5, 10]\"\n      :page-size=\"5\" layout=\"total, sizes, prev, pager, next\" :total=\"total\"></el-pagination>\n    <!-- 按钮-->\n    <div style=\"margin-top: 20px;\">\n      <el-button type=\"danger\" @click=\"batch_bth\">批量删除</el-button>\n      <el-button @click=\"cancel_btn\" type=\"primary\">取消选择</el-button>\n    </div>\n  </el-card>\n</template>\n\n<script>\n  // 添加列表 // 删除// 编辑 // 批量删除\n  import {\n    API_LIST,\n    API_DEl,\n    API_EDIT,\n    API_BATCHDEL\n    \n  } from \"@/api/apis\";\n\n  export default {\n    // 数据\n    data() {\n      return {\n        account: \"\",\n        tableData: [],\n        currentPage: 1, //默认显示第一页\n        pageSize: 5, //默认每页显示5条\n        multipleSelection: [],\n        total: 0,\n        id: 0,\n        // 编辑框的显示和隐藏\n        flag: false,\n        dialogTableVisible: false,\n        dialogFormVisible: false,\n        // 批量删除id 数组\n        idArr: [],\n        form: {\n          account: \"\",\n          userGroup: \"\"\n        },\n        formLabelWidth: \"120px\"\n      };\n    },\n    // 方法\n    methods: {\n      // 刷新用户列表函数\n      refresh() {\n        API_LIST(this.currentPage, this.pageSize).then(res => {\n          this.tableData = res.data.data;\n          this.total = res.data.total;\n          // console.log(res);\n        });\n\n      },\n      toggleSelection(rows) {\n        if (rows) {\n          rows.forEach(row => {\n            this.$refs.multipleTable.toggleRowSelection(row);\n          });\n        } else {\n          this.$refs.multipleTable.clearSelection();\n        }\n      },\n      // 分页:动态每页显示条数\n      handleSizeChange(val) {\n        // console.log(`${val}`);\n        this.pageSize = val; //动态改变\n        // 改变之后应该停留在当前的页面\n        this.refresh(this.currentPage)\n      },\n      // 分页:动态当前页,第几页\n      handleCurrentChange(val) {\n        // console.log(`${val}`);\n        //动态改变:每页多少条\n        this.currentPage = val;\n        this.refresh(this.currentPage)\n\n      },\n      // 选中\n      handleSelectionChange(val) {\n        this.multipleSelection = val;\n        // 数组对象\n        // console.log( this.multipleSelection )\n        for (let obj in this.multipleSelection) {\n          // console.log(this.multipleSelection[obj].id)\n          this.idArr.push(this.multipleSelection[obj].id);\n        }\n      },\n\n      //  取消选择\n      cancel_btn() {\n        this.$refs.multipleTable.clearSelection();\n      },\n      // 编辑模态框\n      handleEdit(index, row) {\n        // console.log(row);\n        // 显示模态框\n        this.dialogFormVisible = true;\n        // 复制给 form\n        this.form = row;\n      },\n      // 编辑\n      // dialogFormVisible = false\n      edit_btn() {\n        // console.log(this.form);\n        API_EDIT(this.form.id, this.form.account, this.form.userGroup).then(res => {\n          // console.log(res);\n          if (res.data.code == 0) {\n            this.$message({\n              showClose: true,\n              message: \"编辑成功~\",\n              type: \"success\"\n            });\n            // 隐藏模态框\n            this.dialogFormVisible = false;\n          }\n        });\n      },\n      // 删除\n      handleDelete(index, row) {\n        this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          API_DEl(row.id).then(res => {\n            if (res.data.code == 0) {\n              // 重新渲染\n              this.refresh(this.currentPage)\n              this.$message({\n                showClose: true,\n                message: \"删除成功~\",\n                type: \"success\"\n              });\n            }\n          });\n        })\n        // console.log(row.id);\n      },\n      // 批量删除\n      batch_bth() {\n        this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          // console.log(JSON.stringify(this.idArr))\n          API_BATCHDEL(JSON.stringify(this.idArr)).then(res => {\n            // console.log(res);\n            if (res.data.code == 0) {\n              this.refresh(this.currentPage)\n              this.$message({\n                showClose: true,\n                message: \"删除成功~\",\n                type: \"success\"\n              });\n            }\n          });\n        })\n\n      }\n    },\n    // 页面加载完毕的时候加载列表\n    created() {\n      // console.log('请求的参数',this.currentPage);\n      this.refresh()\n    }\n  };\n</script>\n\n<style lang=\"less\">\n  .el-pagination .el-select .el-input .el-input__inner {\n    padding-right: 25px;\n    border-radius: 3px;\n    width: 100px;\n  }\n</style>"]}]}