{"remainingRequest":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fenglin/Desktop/study/backstage/src/pages/Login.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/fenglin/Desktop/study/backstage/src/pages/Login.vue","mtime":1591870531597},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/css-loader/dist/cjs.js","mtime":1590894352757},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1590894353459},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/postcss-loader/src/index.js","mtime":1590894353111},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/less-loader/dist/cjs.js","mtime":1591183686071},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/cache-loader/dist/cjs.js","mtime":1590894340264},{"path":"/Users/fenglin/Desktop/study/backstage/node_modules/vue-loader/lib/index.js","mtime":1590894353459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKKiB7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7Cn0KCmJvZHkgewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTAwJTsKCiAgI2FwcCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAgIC5ib3ggewogICAgICB3aWR0aDogNDAwcHg7CiAgICAgIGhlaWdodDogMzAwcHg7CgogICAgICBoMSB7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGNvbG9yOiByZ2IoMjQsIDI0LCAyNCk7CiAgICAgICAgZm9udC1zaXplOiAyNnB4OwogICAgICB9CgogICAgICAuaW5wdXQgewogICAgICAgIG1hcmdpbjogMTVweCAwOwoKICAgICAgICAuZWwtaW5wdXQgewogICAgICAgICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTsKICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC5lbC1idXR0b24gewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIG1hcmdpbjogMjVweCAwcHg7CiAgICAgICAgaGVpZ2h0OiA0MHB4OwogICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"box\">\n    <h1>系统登录</h1>\n    <div class=\"input\">\n      <el-input placeholder=\"请输入管理员账号\" v-model=\"input_user\" clearable></el-input>\n    </div>\n    <div class=\"input\">\n      <el-input placeholder=\"请输入密码\" v-model=\"input_pwd\" show-password></el-input>\n    </div>\n    <div>\n      <el-button type=\"info\" :plain=\"true\" @click=\"clickLogin\">登录</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { API_CHECKLOGIN } from \"@/api/apis\";\n  export default {\n    components: {\n      // index\n    },\n    data() {\n      return {\n        input_user: \"\",\n        input_pwd: \"\",\n        flag: true\n      };\n    },\n    methods: {\n      clickLogin() {\n        // console.log(1)\n        // 点击登录按钮,如果标记为 false 的话不继续执行\n        if (this.flag == false) return;\n        // 发送请求,将标记变为 false\n        this.flag = false;\n        API_CHECKLOGIN(this.input_user, this.input_pwd).then((res) => {\n          // console.log(res.data.code);\n          // 登录成功\n          if (res.data.code == 0) {\n            this.$message({\n              showClose: true,\n              message: \"恭喜您,登录成功~\",\n              type: \"success\"\n            });\n            // 跳转到首页\n            this.$router.push(\"/index/home\");\n            //把 id  token  用户名存储到本地\n            // console.log(res.data.id)\n            // window.localStorage.setItem('user_id',res.data.id)\n            localStorage.user_id = res.data.id;\n            localStorage.user_name = this.input_user;\n            localStorage.token = res.data.token;\n            localStorage.role = res.data.role;\n            // 错误的话\n          } else {\n            this.$message({\n              showClose: true,\n              message: \" 用户名或者密码错误~\",\n              type: \"warning\"\n            });\n          }\n        });\n        // 3 秒内只能发送一次请求,3 秒之后将标记置为 true\n        setTimeout(() => {\n          this.flag = true;\n        }, 3000);\n      }\n    }\n  };\n</script>\n\n<style lang=\"less\"  >\n  * {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    height: 100%;\n    width: 100%;\n\n    #app {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      .box {\n        width: 400px;\n        height: 300px;\n\n        h1 {\n          text-align: center;\n          color: rgb(24, 24, 24);\n          font-size: 26px;\n        }\n\n        .input {\n          margin: 15px 0;\n\n          .el-input {\n            vertical-align: bottom;\n            display: inline-block;\n          }\n        }\n\n        .el-button {\n          width: 100%;\n          margin: 25px 0px;\n          height: 40px;\n          font-size: 18px;\n        }\n      }\n    }\n  }\n</style>"]}]}